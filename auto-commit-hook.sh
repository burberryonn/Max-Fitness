#!/bin/bash
# Автоматический коммит после завершения задач
# Этот скрипт можно добавить в .git/hooks/post-commit или запускать вручную

# Получаем последнее сообщение коммита
LAST_COMMIT_MSG=$(git log -1 --pretty=%B)

# Проверяем, содержит ли коммит маркер завершения задачи
if [[ $LAST_COMMIT_MSG == *"[TASK COMPLETE]"* ]]; then
    echo "Обнаружено завершение задачи, создаю коммит с результатами..."
    
    # Добавляем все изменения
    git add .
    
    # Создаем коммит с описанием
    git commit -m "Auto-commit: Результаты выполнения задачи $(date '+%Y-%m-%d %H:%M:%S')
    
Завершенная задача: $LAST_COMMIT_MSG
Автоматический коммит создан после успешного выполнения задачи."
    
    echo "Автоматический коммит создан успешно!"
else
    echo "Обычный коммит, автоматическое действие не требуется."
fi