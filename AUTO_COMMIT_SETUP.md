# Настройка автоматических коммитов после завершения задач

## Вариант 1: Ручной вызов скрипта

После каждого успешного завершения задачи вы можете вручную запустить скрипт:

```bash
# Добавить скрипту права на выполнение
chmod +x auto-commit-hook.sh

# Запустить скрипт
./auto-commit-hook.sh
```

## Вариант 2: Git Hooks (автоматически)

### Установка post-commit хука:

1. **Перейдите в директорию .git/hooks**:
```bash
cd .git/hooks
```

2. **Создайте или отредактируйте post-commit файл**:
```bash
#!/bin/bash
# Автоматический коммит после завершения задач

# Путь к основному скрипту
/path/to/your/project/auto-commit-hook.sh
```

3. **Сделайте хук исполняемым**:
```bash
chmod +x post-commit
```

### Альтернативно: создайте хук напрямую

Создайте файл `.git/hooks/post-commit` со следующим содержимым:

```bash
#!/bin/bash

# Получаем последнее сообщение коммита
LAST_COMMIT_MSG=$(git log -1 --pretty=%B)

# Проверяем, содержит ли коммит маркер завершения задачи
if [[ $LAST_COMMIT_MSG == *"[TASK COMPLETE]"* ]]; then
    echo "Обнаружено завершение задачи, создаю коммит с результатами..."
    
    # Добавляем все изменения
    git add .
    
    # Создаем коммит с описанием
    git commit -m "Auto-commit: Результаты выполнения задачи $(date '+%Y-%m-%d %H:%M:%S')
    
Завершенная задача: $LAST_COMMIT_MSG
Автоматический коммит создан после успешного выполнения задачи."
    
    echo "Автоматический коммит создан успешно!"
fi
```

## Вариант 3: Использование вручную с маркером

При завершении задачи добавляйте маркер `[TASK COMPLETE]` в сообщение коммита:

```bash
git commit -m "[TASK COMPLETE] Описание выполненной задачи"
```

## Настройка прав доступа

Для Windows:
```cmd
icacls auto-commit-hook.sh /grant:r %USERNAME%:(RX)
```

Для Linux/Mac:
```bash
chmod +x auto-commit-hook.sh
```

## Проверка работы

1. Сделайте коммит с маркером:
```bash
git commit -m "[TASK COMPLETE] Тестовая задача"
```

2. Запустите скрипт или дождитесь автоматического выполнения хука

## Безопасность

- Хуки не передаются при клонировании репозитория
- Скрипты выполняются локально
- Все изменения проходят через ваш контроль

## Отключение автоматических коммитов

Удалите или переименуйте файл `.git/hooks/post-commit`:
```bash
mv .git/hooks/post-commit .git/hooks/post-commit.disabled
```

## Примечания

- Автоматические коммиты будут создаваться только если последний коммит содержит `[TASK COMPLETE]`
- Хуки работают только на локальной машине
- Рекомендуется тестировать на тестовом репозитории перед использованием в основном проекте